<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.20.2/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/ScrollMagic.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.js"></script>
    <link rel="stylesheet" media="screen and (min-width:400px)" type="text/css" href="{{ url_for('static', filename = 'stylesheets/common.css') }}">
    <link rel="stylesheet" media="screen and (max-width:400px)" type="text/css" href="{{ url_for('static', filename = 'stylesheets/common_phone.css') }}">
    <link rel="stylesheet" media="screen and (min-width:400px)" type="text/css" href="{{ url_for('static', filename = 'stylesheets/character.css') }}">
    <link rel="stylesheet" media="screen and (max-width:400px)" type="text/css" href="{{ url_for('static', filename = 'stylesheets/character_phone.css') }}">
    <title>記憶實驗所 - 人格重曝</title>
</head>
<body>

    <div id="fixed_head">
        <div id="toggle">
            <img src="./../static/img/menu.png">
        </div>
        <div id="mem-lab">
            <img src="./../static/img/logo.png">
        </div>
        <div class="fixed_link"><a href="./../flow"> [ 實驗流程 ] </a></div>
        <div class="fixed_link"><a href="./../characters"> [ 人格重曝 ] </a></div>
        <div class="fixed_link"><a href="./../team"> [ 關於我們 ] </a></div>
        <div id="icon">
            <a href="http://www.facebook.com/NTUartfest.MemoryLab/"><img src="./static/img/facebook.png"></a>
        </div>
    </div>

    <div id="menu">
        <a href="./../flow"> [ 實驗流程 ] </a>
        <a href="./../characters"> [ 人格重曝 ] </a>
        <a href="./../team"> [ 關於我們 ] </a>
    </div>

    <div id="header">
        <div id="nav">
            <a href="http://www.facebook.com/NTUartfest.MemoryLab/"><img src="./../static/img/facebook.png"></a>
        </div>
        <div id="links_front">
            <a href="./../flow"> [ 實驗流程 ] </a>
            <a href="./../characters"> [ 人格重曝 ] </a>
            <a href="./../team"> [ 關於我們 ] </a>
        </div>
        <div id="logo">
            <a href="/"><img src="./static/img/logo.png" width="100%"></a>
        </div>
        <div id="links_back">
            <a href="./../flow"> [ 實驗流程 ] </a>
            <a href="./../characters"> [ 人格重曝 ] </a>
            <a href="./../team"> [ 關於我們 ] </a>
        </div>
        <div id="header_text">
            <p>首頁&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;&nbsp;&nbsp;&nbsp;人格重曝</p>
        </div>
    </div>
    

    <!-- 解鎖前要隱藏的部分 -->
    <div id="toHide">
        <div id="info">
            <div id="profile">
                <img src="./../static/questions/{{profile}}">
            </div>
            <h2>{{name}}</h2>
            <p>{{description}}</p>
        </div>
    </div>

    <!-- 人格演進 -->
    <div id="evolution">
        {%for e in evolutions%}
            <img id="ev{{loop.index}}" src="./../static/evolutions/{{e.path}}">
        {%endfor%}
    </div>

    <div class="divider">
        <div></div>
    </div>

    <!-- 實驗歷史 -->
    <div id="history">
        {%for q in questions%}
            {% if loop.index == 6 %}
                <div class="divider">
                    <div></div>
                </div>
            {% endif %}
            <div class="quest" id="quest{{loop.index}}">
                <div class="img_container">
                    <img src="./../static/questions/{{q.path}}">
                </div>
                <div class="content">
                    <h2>Q{{loop.index}}.</h2>
                    <p>{{q.description}}</p>
                </div>
            </div>
        {%endfor%}
    </div>

    <script>
        var controller = new ScrollMagic.Controller();
        {%for e in evolutions%}
            // fade in
            console.log({{loop.index}});
            var du = $('#quest{{e.start_question}}').height();
            new ScrollMagic.Scene(
                    {triggerElement: "#quest{{e.start_question}}", duration: du})
                    .setTween("#ev{{loop.index}}", {opacity: "1"})
                    .addTo(controller);
            // fade out
            new ScrollMagic.Scene(
                    {triggerElement: "#quest{{e.end_question}}", duration: du})
                    .setTween("#ev{{loop.index}}", {opacity: "0"})
                    .addTo(controller);
        {%endfor%}
    </script>

    <script src="{{ url_for('static', filename = 'js/common.js') }}"></script>

</body>
</html>